# Kiáº¿n trÃºc TÃ­ch há»£p X500 + OpenVINS + EGO-Swarm

> ğŸ“Š **Xem sÆ¡ Ä‘á»“ Mermaid tÆ°Æ¡ng tÃ¡c**: [MERMAID_DIAGRAMS.md](./MERMAID_DIAGRAMS.md)
> 
> Bao gá»“m: SÆ¡ Ä‘á»“ tá»•ng quan, luá»“ng dá»¯ liá»‡u, sequence diagrams, state machines, vÃ  nhiá»u hÆ¡n ná»¯a!

## SÆ¡ Ä‘á»“ Kiáº¿n trÃºc Má»›i (ASCII Art)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        GAZEBO SIMULATION                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚  X500 Drone    â”‚                                                  â”‚
â”‚  â”‚  - IMU         â”‚                                                  â”‚
â”‚  â”‚  - Camera      â”‚                                                  â”‚
â”‚  â”‚  - Depth Cam   â”‚ (Optional, cÃ³ thá»ƒ dÃ¹ng pcl_render thay)        â”‚
â”‚  â”‚  - GPS         â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚           â”‚                                                          â”‚
â”‚           â”‚ Sensor Data                                             â”‚
â”‚           â†“                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚   PX4 SITL     â”‚                                                  â”‚
â”‚  â”‚                â”‚                                                  â”‚
â”‚  â”‚ Topics:        â”‚                                                  â”‚
â”‚  â”‚ /fmu/out/      â”‚                                                  â”‚
â”‚  â”‚   vehicle_     â”‚                                                  â”‚
â”‚  â”‚   odometry     â”‚                                                  â”‚
â”‚  â”‚                â”‚                                                  â”‚
â”‚  â”‚ /fmu/in/       â”‚                                                  â”‚
â”‚  â”‚   trajectory_  â”‚                                                  â”‚
â”‚  â”‚   setpoint     â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Sensor Topics
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          OPENVINS                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Visual-Inertial Odometry                                       â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Input:  /x500/camera/image_raw                                â”‚ â”‚
â”‚  â”‚          /x500/imu                                              â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Output: /ov_msckf/odometry_imu  (nav_msgs/Odometry)           â”‚ â”‚
â”‚  â”‚          - position (x, y, z)                                   â”‚ â”‚
â”‚  â”‚          - orientation (quaternion)                             â”‚ â”‚
â”‚  â”‚          - linear velocity                                      â”‚ â”‚
â”‚  â”‚          - covariance                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ /ov_msckf/odometry_imu
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BRIDGE NODES (Má»›i táº¡o)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  1. ODOM_CONVERTER                                              â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Subscribe: /ov_msckf/odometry_imu                             â”‚ â”‚
â”‚  â”‚  Publish:   /drone_0_visual_slam/odom                          â”‚ â”‚
â”‚  â”‚             (hoáº·c odom_world)                                   â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Chá»©c nÄƒng:                                                     â”‚ â”‚
â”‚  â”‚  - Convert frame (náº¿u cáº§n NEDâ†’ENU)                             â”‚ â”‚
â”‚  â”‚  - Remap topic name cho EGO-Swarm                              â”‚ â”‚
â”‚  â”‚  - Sync timestamp                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  2. X500_CMD_BRIDGE                                             â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Subscribe: /drone_0_planning/pos_cmd                          â”‚ â”‚
â”‚  â”‚             (quadrotor_msgs/PositionCommand)                    â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Publish:   /fmu/in/trajectory_setpoint                        â”‚ â”‚
â”‚  â”‚             /fmu/in/offboard_control_mode                      â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Chá»©c nÄƒng:                                                     â”‚ â”‚
â”‚  â”‚  - Convert PositionCommand â†’ TrajectorySetpoint                â”‚ â”‚
â”‚  â”‚  - Convert frame ENUâ†’NED                                       â”‚ â”‚
â”‚  â”‚  - Enable PX4 offboard mode                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                 â”‚
    /drone_0_visual_slam/odom          /drone_0_planning/pos_cmd
                â”‚                                 â†‘
                â†“                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EGO-SWARM PLANNER                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  SENSING MODULES                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚ â”‚
â”‚  â”‚  â”‚ PCL Render Node   â”‚  â”‚ Drone Detector â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚                   â”‚  â”‚                â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚ Input:            â”‚  â”‚ Input:         â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚ - odometry        â”‚  â”‚ - depth        â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚ - global_map      â”‚  â”‚ - odometry     â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚                   â”‚  â”‚ - /others_odom â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚ Output:           â”‚  â”‚                â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚ - depth           â”‚  â”‚ Output:        â”‚                     â”‚ â”‚
â”‚  â”‚  â”‚ - point cloud     â”‚  â”‚ - clean_depth  â”‚                     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MAPPING MODULE                                                 â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Input:  - depth/point cloud                                   â”‚ â”‚
â”‚  â”‚          - odometry                                             â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Output: - local_map (Occupancy Grid)                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  PLANNING MODULE (ego_replan_fsm)                              â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Subscribe:                                                     â”‚ â”‚
â”‚  â”‚  - odom_world (tá»« odom_converter)                              â”‚ â”‚
â”‚  â”‚  - local_map                                                    â”‚ â”‚
â”‚  â”‚  - /drone_X_planning/swarm_trajs (tá»« drones khÃ¡c)             â”‚ â”‚
â”‚  â”‚  - /goal                                                        â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Planning:                                                      â”‚ â”‚
â”‚  â”‚  1. Path Search (A*, JPS, ...)                                 â”‚ â”‚
â”‚  â”‚  2. B-spline Optimization                                       â”‚ â”‚
â”‚  â”‚  3. Collision check vá»›i:                                        â”‚ â”‚
â”‚  â”‚     - Static obstacles (map)                                    â”‚ â”‚
â”‚  â”‚     - Other drones (swarm_trajs)                                â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Publish:                                                       â”‚ â”‚
â”‚  â”‚  - planning/pos_cmd â†’ x500_cmd_bridge                          â”‚ â”‚
â”‚  â”‚  - planning/bspline                                             â”‚ â”‚
â”‚  â”‚  - planning/swarm_trajs (broadcast)                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MAP GENERATOR                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Random Forest / Mockamap                                       â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  Output: /map_generator/global_cloud                           â”‚ â”‚
â”‚  â”‚          (sensor_msgs/PointCloud2)                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Luá»“ng dá»¯ liá»‡u chÃ­nh

### 1. Odometry Flow (Æ¯á»›c lÆ°á»£ng vá»‹ trÃ­)
```
X500 Sensors (Camera+IMU) 
    â†“
OpenVINS (VIO) 
    â†“ /ov_msckf/odometry_imu
odom_converter 
    â†“ /drone_0_visual_slam/odom
EGO-Swarm (Planning, Mapping, Sensing)
```

### 2. Control Flow (Äiá»u khiá»ƒn)
```
Goal Topic (/goal)
    â†“
EGO-Planner (Path Search + Optimization)
    â†“ /drone_0_planning/pos_cmd
x500_cmd_bridge
    â†“ /fmu/in/trajectory_setpoint
PX4 SITL
    â†“
X500 in Gazebo (Move)
```

### 3. Perception Flow (Nháº­n thá»©c mÃ´i trÆ°á»ng)
```
Map Generator
    â†“ /map_generator/global_cloud
PCL Render Node + Odometry
    â†“ depth, point cloud
Drone Detector (remove other drones)
    â†“ clean_depth
Grid Map (Occupancy)
    â†“ local_map
EGO-Planner (Collision Avoidance)
```

### 4. Swarm Communication (Äa UAV)
```
Drone 0 Planning
    â†“ /drone_0_planning/swarm_trajs (broadcast)
Drone 1, 2, ... Subscribe
    â†“
EGO-Planner (Collision check vá»›i predicted trajectories)
```

## So sÃ¡nh: TrÆ°á»›c vÃ  Sau tÃ­ch há»£p

### TRÆ¯á»šC (Simulator giáº£ láº­p)
```
so3_quadrotor_simulator â†’ Odometry (giáº£ láº­p hoÃ n háº£o)
poscmd_2_odom â†’ Convert command thÃ nh odometry trá»±c tiáº¿p
```
- âœ“ ÄÆ¡n giáº£n, khÃ´ng cáº§n VIO thá»±c
- âœ— KhÃ´ng thá»±c táº¿
- âœ— Odometry khÃ´ng cÃ³ noise

### SAU (X500 + OpenVINS)
```
X500 Gazebo â†’ PX4 SITL â†’ Sensors
OpenVINS â†’ Odometry (cÃ³ noise, drift)
Bridge Nodes â†’ Convert topics
```
- âœ“ Thá»±c táº¿ hÆ¡n (cÃ³ VIO noise, drift)
- âœ“ Chuáº©n bá»‹ cho hardware thá»±c
- âœ“ Test kháº£ nÄƒng robust cá»§a planner
- âœ— Phá»©c táº¡p hÆ¡n
- âœ— Cáº§n tune thÃªm parameters

## Topic Mapping Table

| EGO-Swarm Expected | X500 + OpenVINS Actual | Bridge Node |
|-------------------|------------------------|-------------|
| `odom_world` hoáº·c `/drone_0_visual_slam/odom` | `/ov_msckf/odometry_imu` | `odom_converter` |
| `/drone_0_planning/pos_cmd` (subscribe by control) | `/fmu/in/trajectory_setpoint` (PX4) | `x500_cmd_bridge` |
| `depth` | `/x500/camera/depth` hoáº·c `pcl_render_node/depth` | N/A hoáº·c remap |
| `global_map` | `/map_generator/global_cloud` | Giá»¯ nguyÃªn |

## File cáº§n táº¡o/sá»­a

### Táº¡o má»›i:
1. `x500_bridge/src/odom_converter.cpp`
2. `x500_bridge/src/x500_cmd_bridge.cpp`
3. `x500_bridge/CMakeLists.txt`
4. `x500_bridge/package.xml`
5. `plan_manage/launch/ego_with_x500.launch.py`

### Sá»­a Ä‘á»•i (Optional):
- `advanced_param.launch.py` - thÃªm parameters cho X500
- Depth camera config náº¿u X500 chÆ°a cÃ³

## Dependencies cáº§n cÃ i

```bash
# PX4 messages
sudo apt install ros-humble-px4-msgs

# OpenVINS
# (cÃ i theo hÆ°á»›ng dáº«n OpenVINS)

# EGO-Swarm dependencies (Ä‘Ã£ cÃ³)
# - quadrotor_msgs
# - nav_msgs, geometry_msgs, sensor_msgs
```

## Testing Checklist

- [ ] X500 spawn trong Gazebo thÃ nh cÃ´ng
- [ ] OpenVINS publish odometry vá»›i Hz á»•n Ä‘á»‹nh (>30Hz)
- [ ] odom_converter chuyá»ƒn Ä‘á»•i topics Ä‘Ãºng
- [ ] EGO-Swarm nháº­n Ä‘Æ°á»£c odom_world
- [ ] Set goal â†’ EGO-Planner táº¡o trajectory
- [ ] x500_cmd_bridge gá»­i command Ä‘áº¿n PX4
- [ ] X500 di chuyá»ƒn Ä‘áº¿n goal trong Gazebo
- [ ] Planner trÃ¡nh chÆ°á»›ng ngáº¡i váº­t
- [ ] Multi-drone swarm hoáº¡t Ä‘á»™ng

## References

- EGO-Swarm Source: ÄÃ£ phÃ¢n tÃ­ch
- OpenVINS Docs: https://docs.openvins.com/
- PX4 Offboard: https://docs.px4.io/main/en/flight_modes/offboard.html
- ROS2 Bridge Pattern: Standard publisher-subscriber remapping
